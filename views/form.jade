extends layout

block content
    h1 Diary
    p
        a(href='/logout') Logout

    if flash
        p
            for f in flash
                span #{f}

    if essays && essays.length > 0
        h3 Essays
        ul
        for e in essays
            li
                a(href='/edit/' + e.id)=e.content.title
    else
        p
            a(href='/') back to main page

    if form.update
        h3 Deletion
        a(href='/del/' + form.update) delete essay

    h3 New article
    form(action='/new', method='post')
        input(type='hidden', value=token, name='_csrf')
        if form.update
            input(type='hidden', value=form.update, name='update')
        p
            label A title for your essay:
                if form.title
                    input(type='text', name='title', placeholder='title', value=form.title)
                else
                    input(type='text', name='title', placeholder='title')
        p
            label A summary (html) for your essay:
            div
                textarea(name='summary', rows=10, cols='80', placeholder='Summary goes here')=form.summary
        p
            label The content of your essay
            div
                textarea(name='content', rows=10, cols='80', placeholder='Essay goes here')=form.content
        p
            input(type='submit', value='write!')

